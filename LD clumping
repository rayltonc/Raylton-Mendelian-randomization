#path to plink and a bed/bim/fam LD reference dataset

devtools::install_github("explodecomputer/genetics.binaRies")
genetics.binaRies::get_plink_binary()

#load packages
install.packages("dplyr")
install.packages("genetics.binaRies")

library(dplyr)
library(genetics.binaRies)  

#LD clumping
remotes::install_github("mrcieu/ieugwasr")

library(ieugwasr)

# Extract the .tgz file
untar("C:/Users/raylt/Documents/GWAS/1kg.v3.tgz", exdir = "C:/Users/raylt/Documents/GWAS/1kg.v3")

# Convert data to a tibble and create rsid & pval labels
significant_SNPGIANT2018 <- as_tibble(significant_SNPGIANT2018)
formatted_data <- dplyr::tibble(rsid = significant_SNPGIANT2018$ID, pval = significant_SNPGIANT2018$P)

# Specify the path to the PLINK binary files
plink_bin_path <- genetics.binaRies::get_plink_binary()
bfile_path <- "C:/Users/raylt/Documents/GWAS/1kg.v3/EUR" 

plink_bin_path <-"C:/Users/raylt/Documents/GWAS/plink2.exe"
file.exists(plink_bin_path)
system(paste(plink_bin_path, "--version"), intern = TRUE)

clumped_results <- ld_clump(
  dat = formatted_data,
  plink_bin = plink_bin_path,
  bfile = bfile_path
)
